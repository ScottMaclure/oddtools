var app=function(){"use strict";function e(){}function l(e){return e()}function t(){return Object.create(null)}function n(e){e.forEach(l)}function i(e){return"function"==typeof e}function o(e,l){return e!=e?l==l:e!==l||e&&"object"==typeof e||"function"==typeof e}function r(e,l){e.appendChild(l)}function a(e,l,t){e.insertBefore(l,t||null)}function s(e){e.parentNode.removeChild(e)}function c(e,l){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(l)}function u(e){return document.createElement(e)}function m(e){return document.createTextNode(e)}function p(){return m(" ")}function v(){return m("")}function h(e,l,t,n){return e.addEventListener(l,t,n),()=>e.removeEventListener(l,t,n)}function f(e,l,t){null==t?e.removeAttribute(l):e.getAttribute(l)!==t&&e.setAttribute(l,t)}function d(e,l){l=""+l,e.wholeText!==l&&(e.data=l)}function g(e,l){for(let t=0;t<e.options.length;t+=1){const n=e.options[t];if(n.__value===l)return void(n.selected=!0)}}function x(e){const l=e.querySelector(":checked")||e.options[0];return l&&l.__value}let M;function D(e){M=e}const _=[],S=[],y=[],b=[],C=Promise.resolve();let $=!1;function N(e){y.push(e)}let L=!1;const I=new Set;function k(){if(!L){L=!0;do{for(let e=0;e<_.length;e+=1){const l=_[e];D(l),P(l.$$)}for(D(null),_.length=0;S.length;)S.pop()();for(let e=0;e<y.length;e+=1){const l=y[e];I.has(l)||(I.add(l),l())}y.length=0}while(_.length);for(;b.length;)b.pop()();$=!1,L=!1,I.clear()}}function P(e){if(null!==e.fragment){e.update(),n(e.before_update);const l=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,l),e.after_update.forEach(N)}}const E=new Set;function W(e,l){-1===e.$$.dirty[0]&&(_.push(e),$||($=!0,C.then(k)),e.$$.dirty.fill(0)),e.$$.dirty[l/31|0]|=1<<l%31}function R(o,r,a,c,u,m,p=[-1]){const v=M;D(o);const h=r.props||{},f=o.$$={fragment:null,ctx:null,props:m,update:e,not_equal:u,bound:t(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(v?v.$$.context:[]),callbacks:t(),dirty:p,skip_bound:!1};let d=!1;if(f.ctx=a?a(o,h,((e,l,...t)=>{const n=t.length?t[0]:l;return f.ctx&&u(f.ctx[e],f.ctx[e]=n)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](n),d&&W(o,e)),l})):[],f.update(),d=!0,n(f.before_update),f.fragment=!!c&&c(f.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);f.fragment&&f.fragment.l(e),e.forEach(s)}else f.fragment&&f.fragment.c();r.intro&&((g=o.$$.fragment)&&g.i&&(E.delete(g),g.i(x))),function(e,t,o){const{fragment:r,on_mount:a,on_destroy:s,after_update:c}=e.$$;r&&r.m(t,o),N((()=>{const t=a.map(l).filter(i);s?s.push(...t):n(t),e.$$.on_mount=[]})),c.forEach(N)}(o,r.target,r.anchor),k()}var g,x;D(v)}function w(e,l,t){const n=e.slice();return n[9]=l[t],n}function O(e,l,t){const n=e.slice();return n[12]=l[t],n}function B(e,l,t){const n=e.slice();return n[12]=l[t],n}function T(e){let l,t,n,i=e[12].level+"";return{c(){l=u("option"),t=m(i),l.__value=n=e[12],l.value=l.__value},m(e,n){a(e,l,n),r(l,t)},p(e,o){2&o&&i!==(i=e[12].level+"")&&d(t,i),2&o&&n!==(n=e[12])&&(l.__value=n,l.value=l.__value)},d(e){e&&s(l)}}}function A(e){let l,t,n,i,o,c=e[12].levelMin+"",p=e[12].levelMax+"";return{c(){l=u("option"),t=m(c),n=m("-"),i=m(p),l.__value=o=e[12],l.value=l.__value},m(e,o){a(e,l,o),r(l,t),r(l,n),r(l,i)},p(e,n){2&n&&c!==(c=e[12].levelMin+"")&&d(t,c),2&n&&p!==(p=e[12].levelMax+"")&&d(i,p),2&n&&o!==(o=e[12])&&(l.__value=o,l.value=l.__value)},d(e){e&&s(l)}}}function j(e){let l,t,n,i=e[12].levelMax+"";return{c(){l=u("option"),t=m(i),l.__value=n=e[12],l.value=l.__value},m(e,n){a(e,l,n),r(l,t)},p(e,o){2&o&&i!==(i=e[12].levelMax+"")&&d(t,i),2&o&&n!==(n=e[12])&&(l.__value=n,l.value=l.__value)},d(e){e&&s(l)}}}function F(e){let l;function t(e,l){return e[12].levelMin===e[12].levelMax?j:A}let n=t(e),i=n(e);return{c(){i.c(),l=v()},m(e,t){i.m(e,t),a(e,l,t)},p(e,o){n===(n=t(e))&&i?i.p(e,o):(i.d(1),i=n(e),i&&(i.c(),i.m(l.parentNode,l)))},d(e){i.d(e),e&&s(l)}}}function G(e){let l,t,n,i,o,c=e[9].level+"",p=e[9].spells.join(", ")+"";return{c(){l=u("div"),t=m("Level "),n=m(c),i=m(": "),o=m(p)},m(e,s){a(e,l,s),r(l,t),r(l,n),r(l,i),r(l,o)},p(e,l){16&l&&c!==(c=e[9].level+"")&&d(n,c),16&l&&p!==(p=e[9].spells.join(", ")+"")&&d(o,p)},d(e){e&&s(l)}}}function U(e){let l,t=e[9].spells.length>0&&G(e);return{c(){t&&t.c(),l=v()},m(e,n){t&&t.m(e,n),a(e,l,n)},p(e,n){e[9].spells.length>0?t?t.p(e,n):(t=G(e),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(e){t&&t.d(e),e&&s(l)}}}function H(l){let t,i,o,v,x,M,D,_,S,y,b,C,$,L,I,k,P,E,W,R,A,j,G,H,V,q,z,J,K,Q,X,Y,Z,ee,le,te,ne,ie,oe,re,ae,se,ce,ue,me,pe,ve,he,fe,de,ge,xe,Me,De,_e,Se,ye,be,Ce=l[0].title+"",$e=l[2].level+"",Ne=l[2].experience+"",Le=l[3].spellChance+"",Ie=l[3].minNum+"",ke=l[3].maxNum+"",Pe=l[3].maxLevel+"",Ee=l[2].level+"",We=l[0].version+"",Re=l[1].classes.magicUser.levels,we=[];for(let e=0;e<Re.length;e+=1)we[e]=T(B(l,Re,e));let Oe=l[1].abilities.intelligence,Be=[];for(let e=0;e<Oe.length;e+=1)Be[e]=F(O(l,Oe,e));let Te=l[4],Ae=[];for(let e=0;e<Te.length;e+=1)Ae[e]=U(w(l,Te,e));return{c(){t=u("div"),i=u("div"),o=u("header"),v=u("h1"),x=m(Ce),M=p(),D=u("p"),D.textContent="Misc tools for playing OD&D by way of Iron Falcon.",_=p(),S=u("main"),y=u("h2"),y.textContent="Extended Spell List",b=p(),C=u("fieldset"),$=u("legend"),$.textContent="Configure",L=p(),I=u("div"),k=m("Character Level:\n\t\t\t\t\t"),P=u("select");for(let e=0;e<we.length;e+=1)we[e].c();E=p(),W=u("div"),R=m("Intelligence:\n\t\t\t\t\t"),A=u("select");for(let e=0;e<Be.length;e+=1)Be[e].c();j=p(),G=u("div"),H=u("small"),V=m("Level="),q=m($e),z=m(", \n\t\t\t\t\t\tExperience="),J=m(Ne),K=m(", \n\t\t\t\t\t\tChance="),Q=m(Le),X=m("%, \n\t\t\t\t\t\tMin="),Y=m(Ie),Z=m(", \n\t\t\t\t\t\tMax="),ee=m(ke),le=m(", \n\t\t\t\t\t\tMaxLevel="),te=m(Pe),ne=m("."),ie=p(),oe=u("button"),oe.textContent="Generate Spellbook",re=p(),ae=u("fieldset"),se=u("legend"),ce=m("Level "),ue=m(Ee),me=m(" Magic-User's Spellbook"),pe=p();for(let e=0;e<Ae.length;e+=1)Ae[e].c();ve=p(),he=u("footer"),fe=u("small"),de=m("Â© 2020 Scott Maclure. MIT License. Version "),ge=m(We),xe=m(". "),Me=u("a"),De=m("Github repo"),Se=m("."),f(v,"class","svelte-1m0t8y9"),void 0===l[2]&&N((()=>l[7].call(P))),void 0===l[3]&&N((()=>l[8].call(A))),f(ae,"id","spellBook"),f(S,"class","svelte-1m0t8y9"),f(Me,"href",_e=l[0].ghRepo),f(he,"class","svelte-1m0t8y9"),f(i,"class","item svelte-1m0t8y9"),f(t,"class","container svelte-1m0t8y9")},m(e,n){a(e,t,n),r(t,i),r(i,o),r(o,v),r(v,x),r(o,M),r(o,D),r(i,_),r(i,S),r(S,y),r(S,b),r(S,C),r(C,$),r(C,L),r(C,I),r(I,k),r(I,P);for(let e=0;e<we.length;e+=1)we[e].m(P,null);g(P,l[2]),r(C,E),r(C,W),r(W,R),r(W,A);for(let e=0;e<Be.length;e+=1)Be[e].m(A,null);g(A,l[3]),r(W,j),r(W,G),r(G,H),r(H,V),r(H,q),r(H,z),r(H,J),r(H,K),r(H,Q),r(H,X),r(H,Y),r(H,Z),r(H,ee),r(H,le),r(H,te),r(H,ne),r(S,ie),r(S,oe),r(S,re),r(S,ae),r(ae,se),r(se,ce),r(se,ue),r(se,me),r(ae,pe);for(let e=0;e<Ae.length;e+=1)Ae[e].m(ae,null);r(i,ve),r(i,he),r(he,fe),r(fe,de),r(fe,ge),r(fe,xe),r(fe,Me),r(Me,De),r(fe,Se),ye||(be=[h(P,"change",l[7]),h(P,"blur",l[5]),h(A,"change",l[8]),h(oe,"click",l[6])],ye=!0)},p(e,[l]){if(1&l&&Ce!==(Ce=e[0].title+"")&&d(x,Ce),2&l){let t;for(Re=e[1].classes.magicUser.levels,t=0;t<Re.length;t+=1){const n=B(e,Re,t);we[t]?we[t].p(n,l):(we[t]=T(n),we[t].c(),we[t].m(P,null))}for(;t<we.length;t+=1)we[t].d(1);we.length=Re.length}if(6&l&&g(P,e[2]),2&l){let t;for(Oe=e[1].abilities.intelligence,t=0;t<Oe.length;t+=1){const n=O(e,Oe,t);Be[t]?Be[t].p(n,l):(Be[t]=F(n),Be[t].c(),Be[t].m(A,null))}for(;t<Be.length;t+=1)Be[t].d(1);Be.length=Oe.length}if(10&l&&g(A,e[3]),4&l&&$e!==($e=e[2].level+"")&&d(q,$e),4&l&&Ne!==(Ne=e[2].experience+"")&&d(J,Ne),8&l&&Le!==(Le=e[3].spellChance+"")&&d(Q,Le),8&l&&Ie!==(Ie=e[3].minNum+"")&&d(Y,Ie),8&l&&ke!==(ke=e[3].maxNum+"")&&d(ee,ke),8&l&&Pe!==(Pe=e[3].maxLevel+"")&&d(te,Pe),4&l&&Ee!==(Ee=e[2].level+"")&&d(ue,Ee),16&l){let t;for(Te=e[4],t=0;t<Te.length;t+=1){const n=w(e,Te,t);Ae[t]?Ae[t].p(n,l):(Ae[t]=U(n),Ae[t].c(),Ae[t].m(ae,null))}for(;t<Ae.length;t+=1)Ae[t].d(1);Ae.length=Te.length}1&l&&We!==(We=e[0].version+"")&&d(ge,We),1&l&&_e!==(_e=e[0].ghRepo)&&f(Me,"href",_e)},i:e,o:e,d(e){e&&s(t),c(we,e),c(Be,e),c(Ae,e),ye=!1,n(be)}}}function V(e,l){let t=!0;for(;t;){let n=q(l);if(!e.includes(n))return t=!1,n}}function q(e){return e[Math.floor(Math.random()*e.length)]}function z(){return e=1,l=100,Math.floor(Math.random()*(l-e+1))+e;var e,l}function J(e){return JSON.parse(JSON.stringify(e))}function K(e,l,t){let{appData:n}=l,{ifData:i}=l,o=i.classes.magicUser.levels[0],r=i.abilities.intelligence[4],a=J(i.classes.magicUser.startingSpellBook);function s(){console.log("resetSpellBook called"),t(4,a=J(i.classes.magicUser.startingSpellBook))}return e.$$set=e=>{"appData"in e&&t(0,n=e.appData),"ifData"in e&&t(1,i=e.ifData)},[n,i,o,r,a,s,function(){s(),console.log("generateSpellBook, selectedIntelligence:",r);for(let e=0;e<o.level;e++){console.log("Generating spells for level:",e+1);let l=a[e].spells,t=J(i.classes.magicUser.spells[e]);0==e&&(t=t.filter((e=>"Read Magic"!==e))),console.log("currentSpells:",l),console.log("spellsAvailable:",t);let n=!0;for(;n;){if(0===t.length){n=!1;continue}if(l.length>=r.maxNum){n=!1;continue}if(l.length<r.minNum){let e=V(l,t);l.push(e),t=t.filter((l=>l!==e)),n=!0;continue}let e=V(l,t);z()<=r.spellChance&&l.push(e),t=t.filter((l=>l!==e)),n=!0}}},function(){o=x(this),t(2,o),t(1,i)},function(){r=x(this),t(3,r),t(1,i)}]}var Q={title:"OD&D Tools",version:"08 Oct 2020 14:30:41",ghRepo:"https://github.com/ScottMaclure/oddtools"},X={abilities:{intelligence:[{levelMin:3,levelMax:4,spellChance:20,minNum:2,maxNum:3,maxLevel:5},{levelMin:5,levelMax:7,spellChance:30,minNum:2,maxNum:4,maxLevel:5},{levelMin:8,levelMax:9,spellChance:40,minNum:3,maxNum:5,maxLevel:5},{levelMin:10,levelMax:11,spellChance:50,minNum:4,maxNum:6,maxLevel:5},{levelMin:12,levelMax:12,spellChance:50,minNum:4,maxNum:6,maxLevel:6},{levelMin:13,levelMax:13,spellChance:65,minNum:5,maxNum:8,maxLevel:6},{levelMin:14,levelMax:14,spellChance:65,minNum:5,maxNum:8,maxLevel:7},{levelMin:15,levelMax:15,spellChance:75,minNum:6,maxNum:10,maxLevel:7},{levelMin:16,levelMax:16,spellChance:75,minNum:6,maxNum:10,maxLevel:8},{levelMin:17,levelMax:17,spellChance:85,minNum:7,maxNum:99,maxLevel:8},{levelMin:18,levelMax:18,spellChance:95,minNum:8,maxNum:99,maxLevel:9}]},classes:{magicUser:{startingSpellBook:[{level:1,spells:["Read Magic"]},{level:2,spells:[]},{level:3,spells:[]},{level:4,spells:[]},{level:5,spells:[]},{level:6,spells:[]},{level:7,spells:[]},{level:8,spells:[]},{level:9,spells:[]}],_spells_comment:"TODO turn these into objects later.",spells:[["Charm Person","Detect Magic","Hold Portal","Light","Magic Missile","Protection from Evil","Read Languages","Read Magic","Shield","Sleep","Ventriloquism"],["Continual Light","Darkness, 5' Radius","Detect Evil","Detect Invisible","ESP","Invisibility","Knock","Levitate","Locate Object","Magic Mouth","Mirror Image","Phantasmal Forces","Pyrotechnics","Strength","Web","Wizard Lock"],["Clairaudience","Clairvoyance","Dispel Magic","Explosive Runes","Fire Ball","Fly","Haste Spell","Hold Person","Infravision","Invisibility, 10' Radius","Lightning Bolt","Monster Summoning I","Protection from Evil, 10' Radius","Protection from Normal Missiles","Rope Trick","Slow Spell","Suggestion","Water Breathing"],["Charm Monster","Confusion","Dimension Door","Extension I","Fear","Growth of Plants","Hallucinatory Terrain","Ice Storm","Massmorph","Monster Summoning II","Polymorph Others","Polymorph Self","Remove Curse","Wall Of Fire","Wall Of Ice","Wizard Eye"],["Animate Dead","Cloudkill","Conjure Elemental","Contact Higher Plane","Extension II","Feeblemind","Growth of Animals","Hold Monster","Magic Jar","Monster Summoning III","Pass-Wall","Telekinesis","Teleport","Transmute Rock to Mud/Transmute Mud to Rock","Wall of Iron","Wall of Stone"],["Anti-Magic Shell","Control Weather","Death Spell","Disintegrate","Extension III","Geas","Invisible Stalker","Legend Lore","Lower Water","Monster Summoning IV","Move Earth","Part Water"],["Charm Plants","Delayed Blast Fire Ball","Limited Wish","Mass Invisibility","Monster Summoning V","Phase Door","Power Word-Stun","Reverse Gravity","Simulacrum"],["Mass Charm","Clone","Power Word-Blind","Symbol","Permanent Spell","Mind Blank","Polymorph Any Object","Monster Summoning VI"],["Meteor Swarm","Shape Change","Time Stop","Power Word-Kill","Gate","Wish","Astral Spell","Prismatic Wall","Maze","Monster Summoning VII"]],levels:[{level:1,hitDice:"1d4",experience:0},{level:2,hitDice:"2d4",experience:2400},{level:3,hitDice:"3d4",experience:4800},{level:4,hitDice:"4d4",experience:9600},{level:5,hitDice:"5d4",experience:19200},{level:6,hitDice:"6d4",experience:38500},{level:7,hitDice:"7d4",experience:84e3},{level:8,hitDice:"8d4",experience:18e4},{level:9,hitDice:"9d4",experience:3e5},{level:10,hitDice:"9d4",experience:6e5},{level:11,hitDice:"9d4+1",experience:82e4},{level:12,hitDice:"9d4+1",experience:104e4},{level:13,hitDice:"9d4+2",experience:126e4},{level:14,hitDice:"9d4+2",experience:148e4},{level:15,hitDice:"9d4+3",experience:17e5},{level:16,hitDice:"9d4+3",experience:192e4},{level:17,hitDice:"9d4+4",experience:214e4},{level:18,hitDice:"9d4+4",experience:236e4},{level:19,hitDice:"9d4+5",experience:258e4},{level:20,hitDice:"9d4+5",experience:28e5},{level:21,hitDice:"9d4+6",experience:302e4},{level:22,hitDice:"9d4+6",experience:324e4}]}}};return new class extends class{$destroy(){!function(e,l){const t=e.$$;null!==t.fragment&&(n(t.on_destroy),t.fragment&&t.fragment.d(l),t.on_destroy=t.fragment=null,t.ctx=[])}(this,1),this.$destroy=e}$on(e,l){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(l),()=>{const e=t.indexOf(l);-1!==e&&t.splice(e,1)}}$set(e){var l;this.$$set&&(l=e,0!==Object.keys(l).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){super(),R(this,e,K,H,o,{appData:0,ifData:1})}}({target:document.body,props:{appData:Q,ifData:X}})}();
//# sourceMappingURL=bundle.js.map
